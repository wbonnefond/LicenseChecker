plugins {
    id "com.jfrog.bintray" version "1.7.3"
}

apply plugin: 'groovy'
apply plugin: 'maven-publish'

dependencies {
    compile gradleApi()
    compile localGroovy()
}

repositories {
    mavenCentral()
}

dependencies {
    testCompile 'junit:junit:4.12'
}

publishing {
    publications {
        MyPublication(MavenPublication) {
            from components.java
            groupId 'com.wardbonnefond'
            artifactId 'license-checker'
            version '0.1.0'
        }
    }
}

group = 'com.wardbonnefond'
version = '0.1.0'

// Set BINTRAY_USER and BINTRAY_API_KEY in your local.properties
if (project.hasProperty('BINTRAY_USER') && project.hasProperty('BINTRAY_API_KEY')) {
    bintray {
        dryRun = true // Turn off when actually deploying
        publish = false // Maybe someday turn this on for auto-publishing
        publications = ['MyPublication']
        user = "$BINTRAY_USER"
        key = "$BINTRAY_API_KEY"
        pkg {
            repo = 'gradle-plugins'
            name = 'license-checker'
            licenses = ['MIT']
            vcsUrl = 'https://github.com/wbonnefond/LicenseChecker.git'
            version {
                name = '0.1.0'
                desc = 'LicenseChecker 0.1.0'
                vcsTag = '0.1.0'
            }
        }
    }
}
